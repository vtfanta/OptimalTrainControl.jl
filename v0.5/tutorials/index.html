<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tutorial · OptimalTrainControl.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://vtfanta.github.io/OptimalTrainControl.jl/tutorials/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="OptimalTrainControl.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">OptimalTrainControl.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../problem/">Problem Statement</a></li><li class="is-active"><a class="tocitem" href>Tutorial</a><ul class="internal"><li><a class="tocitem" href="#Track-creation"><span>Track creation</span></a></li><li><a class="tocitem" href="#Flat-track"><span>Flat track</span></a></li><li><a class="tocitem" href="#General-track"><span>General track</span></a></li><li><a class="tocitem" href="#Recalculation"><span>Recalculation</span></a></li></ul></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Tutorial</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Tutorial</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/vtfanta/OptimalTrainControl.jl/blob/main/docs/src/tutorials.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Tutorial"><a class="docs-heading-anchor" href="#Tutorial">Tutorial</a><a id="Tutorial-1"></a><a class="docs-heading-anchor-permalink" href="#Tutorial" title="Permalink"></a></h1><p>This page shows how to use the OptimalTrainControl.jl. </p><h2 id="Track-creation"><a class="docs-heading-anchor" href="#Track-creation">Track creation</a><a id="Track-creation-1"></a><a class="docs-heading-anchor-permalink" href="#Track-creation" title="Permalink"></a></h2><p>A flat track instance can be created very simply since it is defined only by its length. A flat track of a length <span>$10\ \mathrm{km}$</span> can be created with</p><pre><code class="language-julia hljs">using OptimalTrainControl
flattrack = FlatTrack(10e3)</code></pre><p>A general track with a nontrivial terrain is defined with the use of two vectors which represent the distances and height values at the corresponding distance (in metres):</p><pre><code class="language-julia hljs">using OptimalTrainControl, Plots
trackX = [0, 2, 3, 5, 7]
trackY = [0, 0.2, -0.1, -0.1, 0.1]
track = HillyTrack(trackX, trackY)
plot(track)</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewBox="0 0 2400 1600">
<defs>
  <clipPath id="clip600">
    <rect x="0" y="0" width="2400" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip600)" d="M0 1600 L2400 1600 L2400 0 L0 0  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip601">
    <rect x="480" y="0" width="1681" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip600)" d="M102.74 1505.26 L2352.76 1505.26 L2352.76 47.2441 L102.74 47.2441  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip602">
    <rect x="102" y="47" width="2251" height="1459"/>
  </clipPath>
</defs>
<polyline clip-path="url(#clip602)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="166.42,1505.26 166.42,47.2441 "/>
<polyline clip-path="url(#clip602)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="772.893,1505.26 772.893,47.2441 "/>
<polyline clip-path="url(#clip602)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1379.37,1505.26 1379.37,47.2441 "/>
<polyline clip-path="url(#clip602)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1985.84,1505.26 1985.84,47.2441 "/>
<polyline clip-path="url(#clip600)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="102.74,1505.26 2352.76,1505.26 "/>
<polyline clip-path="url(#clip600)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="166.42,1505.26 166.42,1486.36 "/>
<polyline clip-path="url(#clip600)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="772.893,1505.26 772.893,1486.36 "/>
<polyline clip-path="url(#clip600)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1379.37,1505.26 1379.37,1486.36 "/>
<polyline clip-path="url(#clip600)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1985.84,1505.26 1985.84,1486.36 "/>
<path clip-path="url(#clip600)" d="M166.42 1536.18 Q162.809 1536.18 160.98 1539.74 Q159.175 1543.28 159.175 1550.41 Q159.175 1557.52 160.98 1561.09 Q162.809 1564.63 166.42 1564.63 Q170.054 1564.63 171.86 1561.09 Q173.688 1557.52 173.688 1550.41 Q173.688 1543.28 171.86 1539.74 Q170.054 1536.18 166.42 1536.18 M166.42 1532.47 Q172.23 1532.47 175.286 1537.08 Q178.364 1541.66 178.364 1550.41 Q178.364 1559.14 175.286 1563.75 Q172.23 1568.33 166.42 1568.33 Q160.61 1568.33 157.531 1563.75 Q154.475 1559.14 154.475 1550.41 Q154.475 1541.66 157.531 1537.08 Q160.61 1532.47 166.42 1532.47 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M767.546 1563.72 L783.865 1563.72 L783.865 1567.66 L761.921 1567.66 L761.921 1563.72 Q764.583 1560.97 769.166 1556.34 Q773.773 1551.69 774.953 1550.35 Q777.199 1547.82 778.078 1546.09 Q778.981 1544.33 778.981 1542.64 Q778.981 1539.88 777.037 1538.15 Q775.115 1536.41 772.013 1536.41 Q769.814 1536.41 767.361 1537.17 Q764.93 1537.94 762.152 1539.49 L762.152 1534.77 Q764.976 1533.63 767.43 1533.05 Q769.884 1532.47 771.921 1532.47 Q777.291 1532.47 780.486 1535.16 Q783.68 1537.85 783.68 1542.34 Q783.68 1544.47 782.87 1546.39 Q782.083 1548.28 779.976 1550.88 Q779.398 1551.55 776.296 1554.77 Q773.194 1557.96 767.546 1563.72 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M1382.38 1537.17 L1370.57 1555.62 L1382.38 1555.62 L1382.38 1537.17 M1381.15 1533.1 L1387.03 1533.1 L1387.03 1555.62 L1391.96 1555.62 L1391.96 1559.51 L1387.03 1559.51 L1387.03 1567.66 L1382.38 1567.66 L1382.38 1559.51 L1366.77 1559.51 L1366.77 1555 L1381.15 1533.1 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M1986.24 1548.52 Q1983.1 1548.52 1981.24 1550.67 Q1979.42 1552.82 1979.42 1556.57 Q1979.42 1560.3 1981.24 1562.47 Q1983.1 1564.63 1986.24 1564.63 Q1989.39 1564.63 1991.22 1562.47 Q1993.07 1560.3 1993.07 1556.57 Q1993.07 1552.82 1991.22 1550.67 Q1989.39 1548.52 1986.24 1548.52 M1995.53 1533.86 L1995.53 1538.12 Q1993.77 1537.29 1991.96 1536.85 Q1990.18 1536.41 1988.42 1536.41 Q1983.79 1536.41 1981.34 1539.53 Q1978.91 1542.66 1978.56 1548.98 Q1979.93 1546.97 1981.99 1545.9 Q1984.05 1544.81 1986.52 1544.81 Q1991.73 1544.81 1994.74 1547.98 Q1997.77 1551.13 1997.77 1556.57 Q1997.77 1561.9 1994.62 1565.11 Q1991.48 1568.33 1986.24 1568.33 Q1980.25 1568.33 1977.08 1563.75 Q1973.91 1559.14 1973.91 1550.41 Q1973.91 1542.22 1977.8 1537.36 Q1981.68 1532.47 1988.24 1532.47 Q1989.99 1532.47 1991.78 1532.82 Q1993.58 1533.17 1995.53 1533.86 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M1030.12 1607.89 L1030.12 1644.84 L1037.89 1644.84 Q1047.73 1644.84 1052.28 1640.38 Q1056.86 1635.93 1056.86 1626.32 Q1056.86 1616.77 1052.28 1612.34 Q1047.73 1607.89 1037.89 1607.89 L1030.12 1607.89 M1023.7 1602.6 L1036.9 1602.6 Q1050.72 1602.6 1057.18 1608.36 Q1063.64 1614.09 1063.64 1626.32 Q1063.64 1638.6 1057.15 1644.36 Q1050.65 1650.12 1036.9 1650.12 L1023.7 1650.12 L1023.7 1602.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M1073.63 1614.48 L1079.49 1614.48 L1079.49 1650.12 L1073.63 1650.12 L1073.63 1614.48 M1073.63 1600.6 L1079.49 1600.6 L1079.49 1608.01 L1073.63 1608.01 L1073.63 1600.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M1114.47 1615.53 L1114.47 1621.06 Q1111.99 1619.79 1109.31 1619.15 Q1106.64 1618.52 1103.78 1618.52 Q1099.42 1618.52 1097.22 1619.85 Q1095.05 1621.19 1095.05 1623.87 Q1095.05 1625.9 1096.61 1627.08 Q1098.17 1628.23 1102.88 1629.28 L1104.89 1629.72 Q1111.13 1631.06 1113.74 1633.51 Q1116.38 1635.93 1116.38 1640.29 Q1116.38 1645.25 1112.43 1648.15 Q1108.52 1651.05 1101.64 1651.05 Q1098.78 1651.05 1095.66 1650.47 Q1092.57 1649.93 1089.13 1648.82 L1089.13 1642.77 Q1092.38 1644.46 1095.53 1645.32 Q1098.68 1646.15 1101.77 1646.15 Q1105.91 1646.15 1108.14 1644.74 Q1110.36 1643.31 1110.36 1640.73 Q1110.36 1638.35 1108.74 1637.07 Q1107.15 1635.8 1101.71 1634.62 L1099.67 1634.15 Q1094.23 1633 1091.81 1630.64 Q1089.39 1628.26 1089.39 1624.12 Q1089.39 1619.09 1092.95 1616.35 Q1096.52 1613.62 1103.08 1613.62 Q1106.32 1613.62 1109.19 1614.09 Q1112.05 1614.57 1114.47 1615.53 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M1131.5 1604.35 L1131.5 1614.48 L1143.56 1614.48 L1143.56 1619.03 L1131.5 1619.03 L1131.5 1638.38 Q1131.5 1642.74 1132.68 1643.98 Q1133.89 1645.22 1137.55 1645.22 L1143.56 1645.22 L1143.56 1650.12 L1137.55 1650.12 Q1130.77 1650.12 1128.19 1647.61 Q1125.61 1645.06 1125.61 1638.38 L1125.61 1619.03 L1121.31 1619.03 L1121.31 1614.48 L1125.61 1614.48 L1125.61 1604.35 L1131.5 1604.35 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M1167.46 1632.2 Q1160.37 1632.2 1157.63 1633.83 Q1154.89 1635.45 1154.89 1639.37 Q1154.89 1642.48 1156.93 1644.33 Q1159 1646.15 1162.53 1646.15 Q1167.4 1646.15 1170.33 1642.71 Q1173.29 1639.24 1173.29 1633.51 L1173.29 1632.2 L1167.46 1632.2 M1179.15 1629.79 L1179.15 1650.12 L1173.29 1650.12 L1173.29 1644.71 Q1171.28 1647.96 1168.29 1649.52 Q1165.3 1651.05 1160.97 1651.05 Q1155.5 1651.05 1152.25 1647.99 Q1149.04 1644.9 1149.04 1639.75 Q1149.04 1633.73 1153.05 1630.68 Q1157.09 1627.62 1165.08 1627.62 L1173.29 1627.62 L1173.29 1627.05 Q1173.29 1623.01 1170.62 1620.81 Q1167.97 1618.58 1163.17 1618.58 Q1160.11 1618.58 1157.22 1619.31 Q1154.32 1620.05 1151.65 1621.51 L1151.65 1616.1 Q1154.86 1614.86 1157.88 1614.25 Q1160.91 1613.62 1163.77 1613.62 Q1171.51 1613.62 1175.33 1617.63 Q1179.15 1621.64 1179.15 1629.79 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M1220.84 1628.61 L1220.84 1650.12 L1214.98 1650.12 L1214.98 1628.8 Q1214.98 1623.74 1213.01 1621.22 Q1211.04 1618.71 1207.09 1618.71 Q1202.35 1618.71 1199.61 1621.73 Q1196.87 1624.76 1196.87 1629.98 L1196.87 1650.12 L1190.99 1650.12 L1190.99 1614.48 L1196.87 1614.48 L1196.87 1620.01 Q1198.98 1616.8 1201.81 1615.21 Q1204.67 1613.62 1208.4 1613.62 Q1214.54 1613.62 1217.69 1617.44 Q1220.84 1621.22 1220.84 1628.61 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M1258.18 1615.84 L1258.18 1621.32 Q1255.69 1619.95 1253.18 1619.28 Q1250.7 1618.58 1248.15 1618.58 Q1242.45 1618.58 1239.3 1622.21 Q1236.15 1625.81 1236.15 1632.33 Q1236.15 1638.86 1239.3 1642.48 Q1242.45 1646.08 1248.15 1646.08 Q1250.7 1646.08 1253.18 1645.41 Q1255.69 1644.71 1258.18 1643.34 L1258.18 1648.76 Q1255.73 1649.9 1253.08 1650.47 Q1250.47 1651.05 1247.51 1651.05 Q1239.46 1651.05 1234.72 1645.99 Q1229.98 1640.93 1229.98 1632.33 Q1229.98 1623.61 1234.75 1618.61 Q1239.56 1613.62 1247.9 1613.62 Q1250.6 1613.62 1253.18 1614.19 Q1255.76 1614.73 1258.18 1615.84 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M1298.85 1630.84 L1298.85 1633.7 L1271.93 1633.7 Q1272.31 1639.75 1275.55 1642.93 Q1278.83 1646.08 1284.66 1646.08 Q1288.03 1646.08 1291.18 1645.25 Q1294.37 1644.43 1297.48 1642.77 L1297.48 1648.31 Q1294.33 1649.65 1291.02 1650.35 Q1287.71 1651.05 1284.31 1651.05 Q1275.78 1651.05 1270.78 1646.08 Q1265.81 1641.12 1265.81 1632.65 Q1265.81 1623.9 1270.53 1618.77 Q1275.27 1613.62 1283.29 1613.62 Q1290.48 1613.62 1294.65 1618.26 Q1298.85 1622.88 1298.85 1630.84 M1293 1629.12 Q1292.93 1624.31 1290.29 1621.45 Q1287.68 1618.58 1283.35 1618.58 Q1278.45 1618.58 1275.49 1621.35 Q1272.56 1624.12 1272.12 1629.15 L1293 1629.12 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M1343.25 1600.66 Q1338.99 1607.98 1336.92 1615.14 Q1334.85 1622.31 1334.85 1629.66 Q1334.85 1637.01 1336.92 1644.24 Q1339.02 1651.43 1343.25 1658.72 L1338.16 1658.72 Q1333.39 1651.24 1331 1644.01 Q1328.64 1636.79 1328.64 1629.66 Q1328.64 1622.56 1331 1615.37 Q1333.36 1608.17 1338.16 1600.66 L1343.25 1600.66 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M1382.37 1621.32 Q1384.57 1617.37 1387.62 1615.49 Q1390.68 1613.62 1394.82 1613.62 Q1400.39 1613.62 1403.41 1617.53 Q1406.43 1621.41 1406.43 1628.61 L1406.43 1650.12 L1400.55 1650.12 L1400.55 1628.8 Q1400.55 1623.67 1398.73 1621.19 Q1396.92 1618.71 1393.19 1618.71 Q1388.64 1618.71 1386 1621.73 Q1383.36 1624.76 1383.36 1629.98 L1383.36 1650.12 L1377.47 1650.12 L1377.47 1628.8 Q1377.47 1623.64 1375.66 1621.19 Q1373.84 1618.71 1370.05 1618.71 Q1365.57 1618.71 1362.92 1621.76 Q1360.28 1624.79 1360.28 1629.98 L1360.28 1650.12 L1354.39 1650.12 L1354.39 1614.48 L1360.28 1614.48 L1360.28 1620.01 Q1362.29 1616.74 1365.09 1615.18 Q1367.89 1613.62 1371.74 1613.62 Q1375.62 1613.62 1378.33 1615.59 Q1381.07 1617.56 1382.37 1621.32 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M1417.19 1600.66 L1422.28 1600.66 Q1427.06 1608.17 1429.41 1615.37 Q1431.8 1622.56 1431.8 1629.66 Q1431.8 1636.79 1429.41 1644.01 Q1427.06 1651.24 1422.28 1658.72 L1417.19 1658.72 Q1421.42 1651.43 1423.49 1644.24 Q1425.59 1637.01 1425.59 1629.66 Q1425.59 1622.31 1423.49 1615.14 Q1421.42 1607.98 1417.19 1600.66 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><polyline clip-path="url(#clip602)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="102.74,1505.26 2352.76,1505.26 "/>
<polyline clip-path="url(#clip602)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="102.74,1213.66 2352.76,1213.66 "/>
<polyline clip-path="url(#clip602)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="102.74,922.054 2352.76,922.054 "/>
<polyline clip-path="url(#clip602)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="102.74,630.45 2352.76,630.45 "/>
<polyline clip-path="url(#clip602)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="102.74,338.847 2352.76,338.847 "/>
<polyline clip-path="url(#clip602)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="102.74,47.2441 2352.76,47.2441 "/>
<polyline clip-path="url(#clip600)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="102.74,1505.26 102.74,47.2441 "/>
<polyline clip-path="url(#clip600)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="102.74,1505.26 121.638,1505.26 "/>
<polyline clip-path="url(#clip600)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="102.74,1213.66 121.638,1213.66 "/>
<polyline clip-path="url(#clip600)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="102.74,922.054 121.638,922.054 "/>
<polyline clip-path="url(#clip600)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="102.74,630.45 121.638,630.45 "/>
<polyline clip-path="url(#clip600)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="102.74,338.847 121.638,338.847 "/>
<polyline clip-path="url(#clip600)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="102.74,47.2441 121.638,47.2441 "/>
<path clip-path="url(#clip600)" d="M9.56454 1491.06 Q5.95345 1491.06 4.12475 1494.62 Q2.31921 1498.16 2.31921 1505.29 Q2.31921 1512.4 4.12475 1515.97 Q5.95345 1519.51 9.56454 1519.51 Q13.1988 1519.51 15.0043 1515.97 Q16.833 1512.4 16.833 1505.29 Q16.833 1498.16 15.0043 1494.62 Q13.1988 1491.06 9.56454 1491.06 M9.56454 1487.35 Q15.3747 1487.35 18.4302 1491.96 Q21.5089 1496.54 21.5089 1505.29 Q21.5089 1514.02 18.4302 1518.63 Q15.3747 1523.21 9.56454 1523.21 Q3.75438 1523.21 0.675697 1518.63 Q-2.37984 1514.02 -2.37984 1505.29 Q-2.37984 1496.54 0.675697 1491.96 Q3.75438 1487.35 9.56454 1487.35 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M29.7265 1516.66 L34.6107 1516.66 L34.6107 1522.54 L29.7265 1522.54 L29.7265 1516.66 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M54.7958 1491.06 Q51.1847 1491.06 49.356 1494.62 Q47.5504 1498.16 47.5504 1505.29 Q47.5504 1512.4 49.356 1515.97 Q51.1847 1519.51 54.7958 1519.51 Q58.43 1519.51 60.2356 1515.97 Q62.0643 1512.4 62.0643 1505.29 Q62.0643 1498.16 60.2356 1494.62 Q58.43 1491.06 54.7958 1491.06 M54.7958 1487.35 Q60.6059 1487.35 63.6615 1491.96 Q66.7402 1496.54 66.7402 1505.29 Q66.7402 1514.02 63.6615 1518.63 Q60.6059 1523.21 54.7958 1523.21 Q48.9856 1523.21 45.9069 1518.63 Q42.8514 1514.02 42.8514 1505.29 Q42.8514 1496.54 45.9069 1491.96 Q48.9856 1487.35 54.7958 1487.35 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M11.1618 1199.46 Q7.55066 1199.46 5.72197 1203.02 Q3.91642 1206.56 3.91642 1213.69 Q3.91642 1220.8 5.72197 1224.36 Q7.55066 1227.9 11.1618 1227.9 Q14.796 1227.9 16.6015 1224.36 Q18.4302 1220.8 18.4302 1213.69 Q18.4302 1206.56 16.6015 1203.02 Q14.796 1199.46 11.1618 1199.46 M11.1618 1195.75 Q16.9719 1195.75 20.0274 1200.36 Q23.1061 1204.94 23.1061 1213.69 Q23.1061 1222.42 20.0274 1227.02 Q16.9719 1231.61 11.1618 1231.61 Q5.3516 1231.61 2.27291 1227.02 Q-0.782629 1222.42 -0.782629 1213.69 Q-0.782629 1204.94 2.27291 1200.36 Q5.3516 1195.75 11.1618 1195.75 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M31.3237 1225.06 L36.2079 1225.06 L36.2079 1230.94 L31.3237 1230.94 L31.3237 1225.06 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M50.4208 1227 L66.7402 1227 L66.7402 1230.94 L44.7958 1230.94 L44.7958 1227 Q47.4579 1224.25 52.0412 1219.62 Q56.6476 1214.96 57.8282 1213.62 Q60.0735 1211.1 60.9532 1209.36 Q61.8559 1207.6 61.8559 1205.91 Q61.8559 1203.16 59.9115 1201.42 Q57.9902 1199.69 54.8884 1199.69 Q52.6893 1199.69 50.2356 1200.45 Q47.8051 1201.21 45.0273 1202.77 L45.0273 1198.04 Q47.8514 1196.91 50.3051 1196.33 Q52.7588 1195.75 54.7958 1195.75 Q60.1661 1195.75 63.3605 1198.44 Q66.555 1201.12 66.555 1205.61 Q66.555 1207.74 65.7448 1209.66 Q64.9578 1211.56 62.8513 1214.15 Q62.2726 1214.83 59.1708 1218.04 Q56.0689 1221.24 50.4208 1227 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M9.07843 907.852 Q5.46734 907.852 3.63864 911.417 Q1.8331 914.959 1.8331 922.088 Q1.8331 929.195 3.63864 932.76 Q5.46734 936.301 9.07843 936.301 Q12.7127 936.301 14.5182 932.76 Q16.3469 929.195 16.3469 922.088 Q16.3469 914.959 14.5182 911.417 Q12.7127 907.852 9.07843 907.852 M9.07843 904.149 Q14.8886 904.149 17.9441 908.755 Q21.0228 913.338 21.0228 922.088 Q21.0228 930.815 17.9441 935.422 Q14.8886 940.005 9.07843 940.005 Q3.26828 940.005 0.189588 935.422 Q-2.86595 930.815 -2.86595 922.088 Q-2.86595 913.338 0.189588 908.755 Q3.26828 904.149 9.07843 904.149 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M29.2404 933.454 L34.1246 933.454 L34.1246 939.334 L29.2404 939.334 L29.2404 933.454 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M57.1569 908.848 L45.3514 927.297 L57.1569 927.297 L57.1569 908.848 M55.93 904.774 L61.8096 904.774 L61.8096 927.297 L66.7402 927.297 L66.7402 931.185 L61.8096 931.185 L61.8096 939.334 L57.1569 939.334 L57.1569 931.185 L41.5551 931.185 L41.5551 926.672 L55.93 904.774 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M9.4025 616.249 Q5.79141 616.249 3.96272 619.814 Q2.15717 623.356 2.15717 630.485 Q2.15717 637.592 3.96272 641.156 Q5.79141 644.698 9.4025 644.698 Q13.0367 644.698 14.8423 641.156 Q16.671 637.592 16.671 630.485 Q16.671 623.356 14.8423 619.814 Q13.0367 616.249 9.4025 616.249 M9.4025 612.545 Q15.2127 612.545 18.2682 617.152 Q21.3469 621.735 21.3469 630.485 Q21.3469 639.212 18.2682 643.818 Q15.2127 648.402 9.4025 648.402 Q3.59235 648.402 0.51366 643.818 Q-2.54188 639.212 -2.54188 630.485 Q-2.54188 621.735 0.51366 617.152 Q3.59235 612.545 9.4025 612.545 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M29.5644 641.851 L34.4487 641.851 L34.4487 647.73 L29.5644 647.73 L29.5644 641.851 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M55.2124 628.587 Q52.0643 628.587 50.2125 630.74 Q48.3838 632.893 48.3838 636.642 Q48.3838 640.369 50.2125 642.545 Q52.0643 644.698 55.2124 644.698 Q58.3606 644.698 60.1893 642.545 Q62.0411 640.369 62.0411 636.642 Q62.0411 632.893 60.1893 630.74 Q58.3606 628.587 55.2124 628.587 M64.4948 613.934 L64.4948 618.194 Q62.7355 617.36 60.93 616.92 Q59.1476 616.481 57.3884 616.481 Q52.7588 616.481 50.3051 619.606 Q47.8745 622.731 47.5273 629.05 Q48.893 627.036 50.9532 625.971 Q53.0134 624.883 55.4902 624.883 Q60.6985 624.883 63.7078 628.055 Q66.7402 631.203 66.7402 636.642 Q66.7402 641.967 63.592 645.184 Q60.4439 648.402 55.2124 648.402 Q49.2171 648.402 46.0458 643.818 Q42.8745 639.212 42.8745 630.485 Q42.8745 622.291 46.7634 617.43 Q50.6523 612.545 57.2032 612.545 Q58.9624 612.545 60.7448 612.893 Q62.5504 613.24 64.4948 613.934 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M9.65713 324.646 Q6.04604 324.646 4.21734 328.211 Q2.4118 331.752 2.4118 338.882 Q2.4118 345.988 4.21734 349.553 Q6.04604 353.095 9.65713 353.095 Q13.2914 353.095 15.0969 349.553 Q16.9256 345.988 16.9256 338.882 Q16.9256 331.752 15.0969 328.211 Q13.2914 324.646 9.65713 324.646 M9.65713 320.942 Q15.4673 320.942 18.5228 325.549 Q21.6015 330.132 21.6015 338.882 Q21.6015 347.609 18.5228 352.215 Q15.4673 356.799 9.65713 356.799 Q3.84698 356.799 0.768289 352.215 Q-2.28725 347.609 -2.28725 338.882 Q-2.28725 330.132 0.768289 325.549 Q3.84698 320.942 9.65713 320.942 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M29.8191 350.248 L34.7033 350.248 L34.7033 356.127 L29.8191 356.127 L29.8191 350.248 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M54.8884 339.715 Q51.5551 339.715 49.6338 341.498 Q47.7356 343.28 47.7356 346.405 Q47.7356 349.53 49.6338 351.312 Q51.5551 353.095 54.8884 353.095 Q58.2217 353.095 60.143 351.312 Q62.0643 349.507 62.0643 346.405 Q62.0643 343.28 60.143 341.498 Q58.2448 339.715 54.8884 339.715 M50.2125 337.725 Q47.2032 336.984 45.5134 334.924 Q43.8468 332.863 43.8468 329.901 Q43.8468 325.757 46.7866 323.35 Q49.7495 320.942 54.8884 320.942 Q60.0504 320.942 62.9902 323.35 Q65.93 325.757 65.93 329.901 Q65.93 332.863 64.2402 334.924 Q62.5735 336.984 59.5874 337.725 Q62.967 338.512 64.842 340.803 Q66.7402 343.095 66.7402 346.405 Q66.7402 351.428 63.6615 354.113 Q60.6059 356.799 54.8884 356.799 Q49.1708 356.799 46.0921 354.113 Q43.0366 351.428 43.0366 346.405 Q43.0366 343.095 44.9347 340.803 Q46.8329 338.512 50.2125 337.725 M48.4995 330.34 Q48.4995 333.026 50.1662 334.53 Q51.856 336.035 54.8884 336.035 Q57.8976 336.035 59.5874 334.53 Q61.3004 333.026 61.3004 330.34 Q61.3004 327.655 59.5874 326.151 Q57.8976 324.646 54.8884 324.646 Q51.856 324.646 50.1662 326.151 Q48.4995 327.655 48.4995 330.34 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M0.374772 60.5889 L8.01362 60.5889 L8.01362 34.2233 L-0.29652 35.89 L-0.29652 31.6308 L7.96732 29.9641 L12.6432 29.9641 L12.6432 60.5889 L20.2821 60.5889 L20.2821 64.5241 L0.374772 64.5241 L0.374772 60.5889 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M29.7265 58.6445 L34.6107 58.6445 L34.6107 64.5241 L29.7265 64.5241 L29.7265 58.6445 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M54.7958 33.0428 Q51.1847 33.0428 49.356 36.6076 Q47.5504 40.1492 47.5504 47.2788 Q47.5504 54.3853 49.356 57.9501 Q51.1847 61.4917 54.7958 61.4917 Q58.43 61.4917 60.2356 57.9501 Q62.0643 54.3853 62.0643 47.2788 Q62.0643 40.1492 60.2356 36.6076 Q58.43 33.0428 54.7958 33.0428 M54.7958 29.3391 Q60.6059 29.3391 63.6615 33.9456 Q66.7402 38.5289 66.7402 47.2788 Q66.7402 56.0056 63.6615 60.6121 Q60.6059 65.1954 54.7958 65.1954 Q48.9856 65.1954 45.9069 60.6121 Q42.8514 56.0056 42.8514 47.2788 Q42.8514 38.5289 45.9069 33.9456 Q48.9856 29.3391 54.7958 29.3391 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M-94.3081 946.328 L-70.6595 955.049 L-70.6595 937.575 L-94.3081 946.328 M-100.642 949.956 L-100.642 942.667 L-53.122 924.557 L-53.122 931.241 L-65.3123 935.57 L-65.3123 956.99 L-53.122 961.319 L-53.122 968.098 L-100.642 949.956 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M-102.647 917.873 L-102.647 912.017 L-53.122 912.017 L-53.122 917.873 L-102.647 917.873 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M-98.8914 893.97 L-88.7699 893.97 L-88.7699 881.907 L-84.2184 881.907 L-84.2184 893.97 L-64.8667 893.97 Q-60.5062 893.97 -59.2649 892.792 Q-58.0235 891.583 -58.0235 887.922 L-58.0235 881.907 L-53.122 881.907 L-53.122 887.922 Q-53.122 894.702 -55.6364 897.28 Q-58.1827 899.858 -64.8667 899.858 L-84.2184 899.858 L-84.2184 904.155 L-88.7699 904.155 L-88.7699 899.858 L-98.8914 899.858 L-98.8914 893.97 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M-88.7699 874.204 L-88.7699 868.348 L-53.122 868.348 L-53.122 874.204 L-88.7699 874.204 M-102.647 874.204 L-102.647 868.348 L-95.2311 868.348 L-95.2311 874.204 L-102.647 874.204 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M-98.8914 850.301 L-88.7699 850.301 L-88.7699 838.238 L-84.2184 838.238 L-84.2184 850.301 L-64.8667 850.301 Q-60.5062 850.301 -59.2649 849.123 Q-58.0235 847.914 -58.0235 844.254 L-58.0235 838.238 L-53.122 838.238 L-53.122 844.254 Q-53.122 851.033 -55.6364 853.611 Q-58.1827 856.189 -64.8667 856.189 L-84.2184 856.189 L-84.2184 860.486 L-88.7699 860.486 L-88.7699 856.189 L-98.8914 856.189 L-98.8914 850.301 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M-67.1902 831.14 L-88.7699 831.14 L-88.7699 825.284 L-67.413 825.284 Q-62.3522 825.284 -59.8059 823.31 Q-57.2915 821.337 -57.2915 817.39 Q-57.2915 812.648 -60.3152 809.911 Q-63.3389 807.142 -68.5588 807.142 L-88.7699 807.142 L-88.7699 801.285 L-53.122 801.285 L-53.122 807.142 L-58.5965 807.142 Q-55.3499 809.274 -53.7585 812.107 Q-52.1989 814.908 -52.1989 818.632 Q-52.1989 824.775 -56.0183 827.957 Q-59.8378 831.14 -67.1902 831.14 M-89.6293 816.404 L-89.6293 816.404 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M-83.3591 765.764 L-102.647 765.764 L-102.647 759.908 L-53.122 759.908 L-53.122 765.764 L-58.4691 765.764 Q-55.2863 767.611 -53.7267 770.443 Q-52.1989 773.244 -52.1989 777.191 Q-52.1989 783.652 -57.3551 787.726 Q-62.5114 791.768 -70.9141 791.768 Q-79.3168 791.768 -84.4731 787.726 Q-89.6293 783.652 -89.6293 777.191 Q-89.6293 773.244 -88.0697 770.443 Q-86.5419 767.611 -83.3591 765.764 M-70.9141 785.721 Q-64.4529 785.721 -60.7608 783.079 Q-57.1005 780.406 -57.1005 775.759 Q-57.1005 771.112 -60.7608 768.438 Q-64.4529 765.764 -70.9141 765.764 Q-77.3753 765.764 -81.0356 768.438 Q-84.7277 771.112 -84.7277 775.759 Q-84.7277 780.406 -81.0356 783.079 Q-77.3753 785.721 -70.9141 785.721 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M-72.41 717.353 L-69.5455 717.353 L-69.5455 744.28 Q-63.4981 743.898 -60.3152 740.652 Q-57.1642 737.373 -57.1642 731.549 Q-57.1642 728.175 -57.9917 725.024 Q-58.8193 721.841 -60.4743 718.722 L-54.9362 718.722 Q-53.5994 721.873 -52.8992 725.183 Q-52.1989 728.493 -52.1989 731.899 Q-52.1989 740.429 -57.1642 745.426 Q-62.1294 750.391 -70.5958 750.391 Q-79.3487 750.391 -84.4731 745.681 Q-89.6293 740.938 -89.6293 732.917 Q-89.6293 725.724 -84.9823 721.555 Q-80.3672 717.353 -72.41 717.353 M-74.1288 723.21 Q-78.9349 723.273 -81.7995 725.915 Q-84.664 728.525 -84.664 732.854 Q-84.664 737.755 -81.8949 740.715 Q-79.1259 743.644 -74.097 744.089 L-74.1288 723.21 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M-102.583 672.952 Q-95.2629 677.217 -88.1015 679.286 Q-80.9401 681.355 -73.5877 681.355 Q-66.2353 681.355 -59.0102 679.286 Q-51.817 677.186 -44.5282 672.952 L-44.5282 678.045 Q-52.008 682.819 -59.233 685.206 Q-66.4581 687.562 -73.5877 687.562 Q-80.6855 687.562 -87.8787 685.206 Q-95.072 682.851 -102.583 678.045 L-102.583 672.952 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M-81.9268 633.835 Q-85.8735 631.639 -87.7514 628.583 Q-89.6293 625.528 -89.6293 621.39 Q-89.6293 615.82 -85.7144 612.797 Q-81.8313 609.773 -74.638 609.773 L-53.122 609.773 L-53.122 615.661 L-74.4471 615.661 Q-79.5715 615.661 -82.0541 617.475 Q-84.5367 619.29 -84.5367 623.013 Q-84.5367 627.565 -81.513 630.207 Q-78.4893 632.849 -73.2694 632.849 L-53.122 632.849 L-53.122 638.737 L-74.4471 638.737 Q-79.6033 638.737 -82.0541 640.551 Q-84.5367 642.365 -84.5367 646.153 Q-84.5367 650.641 -81.4812 653.282 Q-78.4575 655.924 -73.2694 655.924 L-53.122 655.924 L-53.122 661.812 L-88.7699 661.812 L-88.7699 655.924 L-83.2317 655.924 Q-86.5101 653.919 -88.0697 651.118 Q-89.6293 648.317 -89.6293 644.466 Q-89.6293 640.583 -87.6559 637.877 Q-85.6825 635.14 -81.9268 633.835 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip600)" d="M-102.583 599.015 L-102.583 593.922 Q-95.072 589.148 -87.8787 586.793 Q-80.6855 584.405 -73.5877 584.405 Q-66.4581 584.405 -59.233 586.793 Q-52.008 589.148 -44.5282 593.922 L-44.5282 599.015 Q-51.817 594.782 -59.0102 592.713 Q-66.2353 590.612 -73.5877 590.612 Q-80.9401 590.612 -88.1015 592.713 Q-95.2629 594.782 -102.583 599.015 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip602)" d="M166.42 1359.46 L772.893 1067.86 L1076.13 1505.26 L1682.6 1505.26 L2289.08 1213.66 L2289.08 1505.26 L1682.6 1505.26 L1076.13 1505.26 L772.893 1505.26 L166.42 1505.26  Z" fill="#d3d3d3" fill-rule="evenodd" fill-opacity="1"/>
<polyline clip-path="url(#clip602)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="166.42,1359.46 772.893,1067.86 1076.13,1505.26 1682.6,1505.26 2289.08,1213.66 "/>
<polyline clip-path="url(#clip602)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="166.42,1359.46 772.893,1067.86 1076.13,1505.26 1682.6,1505.26 2289.08,1213.66 "/>
</svg>
<h2 id="Flat-track"><a class="docs-heading-anchor" href="#Flat-track">Flat track</a><a id="Flat-track-1"></a><a class="docs-heading-anchor-permalink" href="#Flat-track" title="Permalink"></a></h2><p>Consider now the problem of finding the optimal speed profile on a flat track defined above. The total journey time is <span>$1000\ \mathrm{s}$</span> and the other parameters are set to their default values. The default values are <code>vᵢ = 1.0</code>, <code>vf = 1.0</code>, <code>umax = v -&gt; 3 / max(5, v)</code>, <code>umin = v -&gt; -3 / max(5, v)</code>, <code>ρ = 0</code>, <span>$r(v)=0.01 + 1.5\cdot 10^{-5}v^2$</span>. The parameter values are passed as keyword arguments to the <code>TrainProblem</code> struct:</p><pre><code class="language-julia hljs">prob = TrainProblem(; track = flattrack, T = 1000)</code></pre><p>We can now solve the problem and plot the results:</p><pre><code class="language- hljs">using OptimalTrainControl, Plots # hide
flattrack = FlatTrack(10e3) # hide
prob = TrainProblem(; track = flattrack, T = 1000) # hide
points, sol = solve!(prob)
plot(sol.t, sol[2,:]; color = modecolor(sol.t, points), lw = 2, label = false,
    xlabel = &quot;Distance (m)&quot;, ylabel = &quot;Speed (m/s)&quot;) </code></pre><h2 id="General-track"><a class="docs-heading-anchor" href="#General-track">General track</a><a id="General-track-1"></a><a class="docs-heading-anchor-permalink" href="#General-track" title="Permalink"></a></h2><p>The previous example involved a flat track. However, the Earth, as some of us still believe, is not as flat as it would seem. The following example shows calculation of optimal speed profile for the case of a track containing steep sections.</p><p>The track gradient profile is taken from <a href="https://doi.org/10.1109/9.867018">this article</a> written by Eugene Khmelnitsky. Let&#39;s visualise it:</p><pre><code class="language-julia hljs">trackX = [0,16e3,20e3,24e3,25e3,28e3,31e3,40e3]
trackY = [0,0,400,160,160,460,280,280]/9.81
track = HillyTrack(trackX, trackY)
plot(track)</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewBox="0 0 2400 1600">
<defs>
  <clipPath id="clip660">
    <rect x="0" y="0" width="2400" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip660)" d="M0 1600 L2400 1600 L2400 0 L0 0  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip661">
    <rect x="480" y="0" width="1681" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip660)" d="M102.74 1458.42 L2352.76 1458.42 L2352.76 47.2441 L102.74 47.2441  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip662">
    <rect x="102" y="47" width="2251" height="1412"/>
  </clipPath>
</defs>
<polyline clip-path="url(#clip662)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="166.42,1458.42 166.42,47.2441 "/>
<polyline clip-path="url(#clip662)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="697.084,1458.42 697.084,47.2441 "/>
<polyline clip-path="url(#clip662)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1227.75,1458.42 1227.75,47.2441 "/>
<polyline clip-path="url(#clip662)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1758.41,1458.42 1758.41,47.2441 "/>
<polyline clip-path="url(#clip662)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2289.08,1458.42 2289.08,47.2441 "/>
<polyline clip-path="url(#clip660)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="102.74,1458.42 2352.76,1458.42 "/>
<polyline clip-path="url(#clip660)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="166.42,1458.42 166.42,1439.52 "/>
<polyline clip-path="url(#clip660)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="697.084,1458.42 697.084,1439.52 "/>
<polyline clip-path="url(#clip660)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1227.75,1458.42 1227.75,1439.52 "/>
<polyline clip-path="url(#clip660)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1758.41,1458.42 1758.41,1439.52 "/>
<polyline clip-path="url(#clip660)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2289.08,1458.42 2289.08,1439.52 "/>
<path clip-path="url(#clip660)" d="M166.42 1489.34 Q162.809 1489.34 160.98 1492.9 Q159.175 1496.44 159.175 1503.57 Q159.175 1510.68 160.98 1514.24 Q162.809 1517.78 166.42 1517.78 Q170.054 1517.78 171.86 1514.24 Q173.688 1510.68 173.688 1503.57 Q173.688 1496.44 171.86 1492.9 Q170.054 1489.34 166.42 1489.34 M166.42 1485.63 Q172.23 1485.63 175.286 1490.24 Q178.364 1494.82 178.364 1503.57 Q178.364 1512.3 175.286 1516.9 Q172.23 1521.49 166.42 1521.49 Q160.61 1521.49 157.531 1516.9 Q154.475 1512.3 154.475 1503.57 Q154.475 1494.82 157.531 1490.24 Q160.61 1485.63 166.42 1485.63 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M603.983 1532.54 L611.621 1532.54 L611.621 1506.18 L603.311 1507.84 L603.311 1503.58 L611.575 1501.92 L616.251 1501.92 L616.251 1532.54 L623.89 1532.54 L623.89 1536.48 L603.983 1536.48 L603.983 1532.54 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M633.334 1530.6 L638.219 1530.6 L638.219 1536.48 L633.334 1536.48 L633.334 1530.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M658.404 1505 Q654.792 1505 652.964 1508.56 Q651.158 1512.1 651.158 1519.23 Q651.158 1526.34 652.964 1529.9 Q654.792 1533.44 658.404 1533.44 Q662.038 1533.44 663.843 1529.9 Q665.672 1526.34 665.672 1519.23 Q665.672 1512.1 663.843 1508.56 Q662.038 1505 658.404 1505 M658.404 1501.29 Q664.214 1501.29 667.269 1505.9 Q670.348 1510.48 670.348 1519.23 Q670.348 1527.96 667.269 1532.56 Q664.214 1537.15 658.404 1537.15 Q652.593 1537.15 649.515 1532.56 Q646.459 1527.96 646.459 1519.23 Q646.459 1510.48 649.515 1505.9 Q652.593 1501.29 658.404 1501.29 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M706.737 1511.01 L696.158 1521.64 L706.737 1532.22 L703.982 1535.02 L693.357 1524.39 L682.732 1535.02 L680.001 1532.22 L690.556 1521.64 L680.001 1511.01 L682.732 1508.21 L693.357 1518.84 L703.982 1508.21 L706.737 1511.01 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M719.098 1532.54 L726.737 1532.54 L726.737 1506.18 L718.426 1507.84 L718.426 1503.58 L726.69 1501.92 L731.366 1501.92 L731.366 1532.54 L739.005 1532.54 L739.005 1536.48 L719.098 1536.48 L719.098 1532.54 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M758.449 1505 Q754.838 1505 753.01 1508.56 Q751.204 1512.1 751.204 1519.23 Q751.204 1526.34 753.01 1529.9 Q754.838 1533.44 758.449 1533.44 Q762.084 1533.44 763.889 1529.9 Q765.718 1526.34 765.718 1519.23 Q765.718 1512.1 763.889 1508.56 Q762.084 1505 758.449 1505 M758.449 1501.29 Q764.26 1501.29 767.315 1505.9 Q770.394 1510.48 770.394 1519.23 Q770.394 1527.96 767.315 1532.56 Q764.26 1537.15 758.449 1537.15 Q752.639 1537.15 749.561 1532.56 Q746.505 1527.96 746.505 1519.23 Q746.505 1510.48 749.561 1505.9 Q752.639 1501.29 758.449 1501.29 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M783.07 1484.3 L773.478 1499.29 L783.07 1499.29 L783.07 1484.3 M782.073 1480.99 L786.851 1480.99 L786.851 1499.29 L790.857 1499.29 L790.857 1502.45 L786.851 1502.45 L786.851 1509.07 L783.07 1509.07 L783.07 1502.45 L770.394 1502.45 L770.394 1498.78 L782.073 1480.99 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1138.73 1532.54 L1155.05 1532.54 L1155.05 1536.48 L1133.11 1536.48 L1133.11 1532.54 Q1135.77 1529.79 1140.35 1525.16 Q1144.96 1520.5 1146.14 1519.16 Q1148.39 1516.64 1149.26 1514.9 Q1150.17 1513.14 1150.17 1511.45 Q1150.17 1508.7 1148.22 1506.96 Q1146.3 1505.23 1143.2 1505.23 Q1141 1505.23 1138.55 1505.99 Q1136.12 1506.75 1133.34 1508.31 L1133.34 1503.58 Q1136.16 1502.45 1138.62 1501.87 Q1141.07 1501.29 1143.11 1501.29 Q1148.48 1501.29 1151.67 1503.98 Q1154.87 1506.66 1154.87 1511.15 Q1154.87 1513.28 1154.06 1515.2 Q1153.27 1517.1 1151.16 1519.69 Q1150.58 1520.37 1147.48 1523.58 Q1144.38 1526.78 1138.73 1532.54 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1164.87 1530.6 L1169.75 1530.6 L1169.75 1536.48 L1164.87 1536.48 L1164.87 1530.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1189.94 1505 Q1186.32 1505 1184.5 1508.56 Q1182.69 1512.1 1182.69 1519.23 Q1182.69 1526.34 1184.5 1529.9 Q1186.32 1533.44 1189.94 1533.44 Q1193.57 1533.44 1195.38 1529.9 Q1197.2 1526.34 1197.2 1519.23 Q1197.2 1512.1 1195.38 1508.56 Q1193.57 1505 1189.94 1505 M1189.94 1501.29 Q1195.75 1501.29 1198.8 1505.9 Q1201.88 1510.48 1201.88 1519.23 Q1201.88 1527.96 1198.8 1532.56 Q1195.75 1537.15 1189.94 1537.15 Q1184.13 1537.15 1181.05 1532.56 Q1177.99 1527.96 1177.99 1519.23 Q1177.99 1510.48 1181.05 1505.9 Q1184.13 1501.29 1189.94 1501.29 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1238.27 1511.01 L1227.69 1521.64 L1238.27 1532.22 L1235.51 1535.02 L1224.89 1524.39 L1214.26 1535.02 L1211.53 1532.22 L1222.09 1521.64 L1211.53 1511.01 L1214.26 1508.21 L1224.89 1518.84 L1235.51 1508.21 L1238.27 1511.01 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1250.63 1532.54 L1258.27 1532.54 L1258.27 1506.18 L1249.96 1507.84 L1249.96 1503.58 L1258.22 1501.92 L1262.9 1501.92 L1262.9 1532.54 L1270.54 1532.54 L1270.54 1536.48 L1250.63 1536.48 L1250.63 1532.54 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1289.98 1505 Q1286.37 1505 1284.54 1508.56 Q1282.74 1512.1 1282.74 1519.23 Q1282.74 1526.34 1284.54 1529.9 Q1286.37 1533.44 1289.98 1533.44 Q1293.62 1533.44 1295.42 1529.9 Q1297.25 1526.34 1297.25 1519.23 Q1297.25 1512.1 1295.42 1508.56 Q1293.62 1505 1289.98 1505 M1289.98 1501.29 Q1295.79 1501.29 1298.85 1505.9 Q1301.93 1510.48 1301.93 1519.23 Q1301.93 1527.96 1298.85 1532.56 Q1295.79 1537.15 1289.98 1537.15 Q1284.17 1537.15 1281.09 1532.56 Q1278.04 1527.96 1278.04 1519.23 Q1278.04 1510.48 1281.09 1505.9 Q1284.17 1501.29 1289.98 1501.29 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1314.6 1484.3 L1305.01 1499.29 L1314.6 1499.29 L1314.6 1484.3 M1313.61 1480.99 L1318.38 1480.99 L1318.38 1499.29 L1322.39 1499.29 L1322.39 1502.45 L1318.38 1502.45 L1318.38 1509.07 L1314.6 1509.07 L1314.6 1502.45 L1301.93 1502.45 L1301.93 1498.78 L1313.61 1480.99 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1679.47 1517.84 Q1682.82 1518.56 1684.7 1520.83 Q1686.6 1523.1 1686.6 1526.43 Q1686.6 1531.55 1683.08 1534.35 Q1679.56 1537.15 1673.08 1537.15 Q1670.9 1537.15 1668.59 1536.71 Q1666.29 1536.29 1663.84 1535.43 L1663.84 1530.92 Q1665.79 1532.06 1668.1 1532.63 Q1670.41 1533.21 1672.94 1533.21 Q1677.34 1533.21 1679.63 1531.48 Q1681.94 1529.74 1681.94 1526.43 Q1681.94 1523.37 1679.79 1521.66 Q1677.66 1519.93 1673.84 1519.93 L1669.81 1519.93 L1669.81 1516.08 L1674.03 1516.08 Q1677.48 1516.08 1679.3 1514.72 Q1681.13 1513.33 1681.13 1510.74 Q1681.13 1508.07 1679.23 1506.66 Q1677.36 1505.23 1673.84 1505.23 Q1671.92 1505.23 1669.72 1505.64 Q1667.52 1506.06 1664.88 1506.94 L1664.88 1502.77 Q1667.54 1502.03 1669.86 1501.66 Q1672.2 1501.29 1674.26 1501.29 Q1679.58 1501.29 1682.68 1503.72 Q1685.79 1506.13 1685.79 1510.25 Q1685.79 1513.12 1684.14 1515.11 Q1682.5 1517.08 1679.47 1517.84 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1695.46 1530.6 L1700.35 1530.6 L1700.35 1536.48 L1695.46 1536.48 L1695.46 1530.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1720.53 1505 Q1716.92 1505 1715.09 1508.56 Q1713.29 1512.1 1713.29 1519.23 Q1713.29 1526.34 1715.09 1529.9 Q1716.92 1533.44 1720.53 1533.44 Q1724.16 1533.44 1725.97 1529.9 Q1727.8 1526.34 1727.8 1519.23 Q1727.8 1512.1 1725.97 1508.56 Q1724.16 1505 1720.53 1505 M1720.53 1501.29 Q1726.34 1501.29 1729.4 1505.9 Q1732.47 1510.48 1732.47 1519.23 Q1732.47 1527.96 1729.4 1532.56 Q1726.34 1537.15 1720.53 1537.15 Q1714.72 1537.15 1711.64 1532.56 Q1708.59 1527.96 1708.59 1519.23 Q1708.59 1510.48 1711.64 1505.9 Q1714.72 1501.29 1720.53 1501.29 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1768.86 1511.01 L1758.28 1521.64 L1768.86 1532.22 L1766.11 1535.02 L1755.48 1524.39 L1744.86 1535.02 L1742.13 1532.22 L1752.68 1521.64 L1742.13 1511.01 L1744.86 1508.21 L1755.48 1518.84 L1766.11 1508.21 L1768.86 1511.01 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1781.22 1532.54 L1788.86 1532.54 L1788.86 1506.18 L1780.55 1507.84 L1780.55 1503.58 L1788.82 1501.92 L1793.49 1501.92 L1793.49 1532.54 L1801.13 1532.54 L1801.13 1536.48 L1781.22 1536.48 L1781.22 1532.54 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1820.58 1505 Q1816.97 1505 1815.14 1508.56 Q1813.33 1512.1 1813.33 1519.23 Q1813.33 1526.34 1815.14 1529.9 Q1816.97 1533.44 1820.58 1533.44 Q1824.21 1533.44 1826.02 1529.9 Q1827.84 1526.34 1827.84 1519.23 Q1827.84 1512.1 1826.02 1508.56 Q1824.21 1505 1820.58 1505 M1820.58 1501.29 Q1826.39 1501.29 1829.44 1505.9 Q1832.52 1510.48 1832.52 1519.23 Q1832.52 1527.96 1829.44 1532.56 Q1826.39 1537.15 1820.58 1537.15 Q1814.77 1537.15 1811.69 1532.56 Q1808.63 1527.96 1808.63 1519.23 Q1808.63 1510.48 1811.69 1505.9 Q1814.77 1501.29 1820.58 1501.29 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1845.2 1484.3 L1835.6 1499.29 L1845.2 1499.29 L1845.2 1484.3 M1844.2 1480.99 L1848.98 1480.99 L1848.98 1499.29 L1852.98 1499.29 L1852.98 1502.45 L1848.98 1502.45 L1848.98 1509.07 L1845.2 1509.07 L1845.2 1502.45 L1832.52 1502.45 L1832.52 1498.78 L1844.2 1480.99 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M2209.46 1505.99 L2197.65 1524.44 L2209.46 1524.44 L2209.46 1505.99 M2208.23 1501.92 L2214.11 1501.92 L2214.11 1524.44 L2219.04 1524.44 L2219.04 1528.33 L2214.11 1528.33 L2214.11 1536.48 L2209.46 1536.48 L2209.46 1528.33 L2193.86 1528.33 L2193.86 1523.81 L2208.23 1501.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M2226.77 1530.6 L2231.66 1530.6 L2231.66 1536.48 L2226.77 1536.48 L2226.77 1530.6 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M2251.84 1505 Q2248.23 1505 2246.4 1508.56 Q2244.6 1512.1 2244.6 1519.23 Q2244.6 1526.34 2246.4 1529.9 Q2248.23 1533.44 2251.84 1533.44 Q2255.48 1533.44 2257.28 1529.9 Q2259.11 1526.34 2259.11 1519.23 Q2259.11 1512.1 2257.28 1508.56 Q2255.48 1505 2251.84 1505 M2251.84 1501.29 Q2257.65 1501.29 2260.71 1505.9 Q2263.79 1510.48 2263.79 1519.23 Q2263.79 1527.96 2260.71 1532.56 Q2257.65 1537.15 2251.84 1537.15 Q2246.03 1537.15 2242.95 1532.56 Q2239.9 1527.96 2239.9 1519.23 Q2239.9 1510.48 2242.95 1505.9 Q2246.03 1501.29 2251.84 1501.29 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M2300.18 1511.01 L2289.6 1521.64 L2300.18 1532.22 L2297.42 1535.02 L2286.8 1524.39 L2276.17 1535.02 L2273.44 1532.22 L2284 1521.64 L2273.44 1511.01 L2276.17 1508.21 L2286.8 1518.84 L2297.42 1508.21 L2300.18 1511.01 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M2312.54 1532.54 L2320.18 1532.54 L2320.18 1506.18 L2311.87 1507.84 L2311.87 1503.58 L2320.13 1501.92 L2324.81 1501.92 L2324.81 1532.54 L2332.44 1532.54 L2332.44 1536.48 L2312.54 1536.48 L2312.54 1532.54 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M2351.89 1505 Q2348.28 1505 2346.45 1508.56 Q2344.64 1512.1 2344.64 1519.23 Q2344.64 1526.34 2346.45 1529.9 Q2348.28 1533.44 2351.89 1533.44 Q2355.52 1533.44 2357.33 1529.9 Q2359.16 1526.34 2359.16 1519.23 Q2359.16 1512.1 2357.33 1508.56 Q2355.52 1505 2351.89 1505 M2351.89 1501.29 Q2357.7 1501.29 2360.75 1505.9 Q2363.83 1510.48 2363.83 1519.23 Q2363.83 1527.96 2360.75 1532.56 Q2357.7 1537.15 2351.89 1537.15 Q2346.08 1537.15 2343 1532.56 Q2339.94 1527.96 2339.94 1519.23 Q2339.94 1510.48 2343 1505.9 Q2346.08 1501.29 2351.89 1501.29 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M2376.51 1484.3 L2366.92 1499.29 L2376.51 1499.29 L2376.51 1484.3 M2375.51 1480.99 L2380.29 1480.99 L2380.29 1499.29 L2384.3 1499.29 L2384.3 1502.45 L2380.29 1502.45 L2380.29 1509.07 L2376.51 1509.07 L2376.51 1502.45 L2363.83 1502.45 L2363.83 1498.78 L2375.51 1480.99 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1030.12 1579.47 L1030.12 1616.42 L1037.89 1616.42 Q1047.73 1616.42 1052.28 1611.97 Q1056.86 1607.51 1056.86 1597.9 Q1056.86 1588.35 1052.28 1583.92 Q1047.73 1579.47 1037.89 1579.47 L1030.12 1579.47 M1023.7 1574.19 L1036.9 1574.19 Q1050.72 1574.19 1057.18 1579.95 Q1063.64 1585.68 1063.64 1597.9 Q1063.64 1610.18 1057.15 1615.94 Q1050.65 1621.71 1036.9 1621.71 L1023.7 1621.71 L1023.7 1574.19 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1073.63 1586.06 L1079.49 1586.06 L1079.49 1621.71 L1073.63 1621.71 L1073.63 1586.06 M1073.63 1572.18 L1079.49 1572.18 L1079.49 1579.6 L1073.63 1579.6 L1073.63 1572.18 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1114.47 1587.11 L1114.47 1592.65 Q1111.99 1591.37 1109.31 1590.74 Q1106.64 1590.1 1103.78 1590.1 Q1099.42 1590.1 1097.22 1591.44 Q1095.05 1592.77 1095.05 1595.45 Q1095.05 1597.48 1096.61 1598.66 Q1098.17 1599.81 1102.88 1600.86 L1104.89 1601.3 Q1111.13 1602.64 1113.74 1605.09 Q1116.38 1607.51 1116.38 1611.87 Q1116.38 1616.84 1112.43 1619.73 Q1108.52 1622.63 1101.64 1622.63 Q1098.78 1622.63 1095.66 1622.06 Q1092.57 1621.51 1089.13 1620.4 L1089.13 1614.35 Q1092.38 1616.04 1095.53 1616.9 Q1098.68 1617.73 1101.77 1617.73 Q1105.91 1617.73 1108.14 1616.33 Q1110.36 1614.89 1110.36 1612.32 Q1110.36 1609.93 1108.74 1608.66 Q1107.15 1607.38 1101.71 1606.2 L1099.67 1605.73 Q1094.23 1604.58 1091.81 1602.23 Q1089.39 1599.84 1089.39 1595.7 Q1089.39 1590.67 1092.95 1587.94 Q1096.52 1585.2 1103.08 1585.2 Q1106.32 1585.2 1109.19 1585.68 Q1112.05 1586.15 1114.47 1587.11 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1131.5 1575.94 L1131.5 1586.06 L1143.56 1586.06 L1143.56 1590.61 L1131.5 1590.61 L1131.5 1609.96 Q1131.5 1614.32 1132.68 1615.56 Q1133.89 1616.8 1137.55 1616.8 L1143.56 1616.8 L1143.56 1621.71 L1137.55 1621.71 Q1130.77 1621.71 1128.19 1619.19 Q1125.61 1616.64 1125.61 1609.96 L1125.61 1590.61 L1121.31 1590.61 L1121.31 1586.06 L1125.61 1586.06 L1125.61 1575.94 L1131.5 1575.94 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1167.46 1603.79 Q1160.37 1603.79 1157.63 1605.41 Q1154.89 1607.03 1154.89 1610.95 Q1154.89 1614.07 1156.93 1615.91 Q1159 1617.73 1162.53 1617.73 Q1167.4 1617.73 1170.33 1614.29 Q1173.29 1610.82 1173.29 1605.09 L1173.29 1603.79 L1167.46 1603.79 M1179.15 1601.37 L1179.15 1621.71 L1173.29 1621.71 L1173.29 1616.29 Q1171.28 1619.54 1168.29 1621.1 Q1165.3 1622.63 1160.97 1622.63 Q1155.5 1622.63 1152.25 1619.57 Q1149.04 1616.49 1149.04 1611.33 Q1149.04 1605.31 1153.05 1602.26 Q1157.09 1599.2 1165.08 1599.2 L1173.29 1599.2 L1173.29 1598.63 Q1173.29 1594.59 1170.62 1592.39 Q1167.97 1590.16 1163.17 1590.16 Q1160.11 1590.16 1157.22 1590.9 Q1154.32 1591.63 1151.65 1593.09 L1151.65 1587.68 Q1154.86 1586.44 1157.88 1585.83 Q1160.91 1585.2 1163.77 1585.2 Q1171.51 1585.2 1175.33 1589.21 Q1179.15 1593.22 1179.15 1601.37 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1220.84 1600.19 L1220.84 1621.71 L1214.98 1621.71 L1214.98 1600.38 Q1214.98 1595.32 1213.01 1592.81 Q1211.04 1590.29 1207.09 1590.29 Q1202.35 1590.29 1199.61 1593.31 Q1196.87 1596.34 1196.87 1601.56 L1196.87 1621.71 L1190.99 1621.71 L1190.99 1586.06 L1196.87 1586.06 L1196.87 1591.6 Q1198.98 1588.38 1201.81 1586.79 Q1204.67 1585.2 1208.4 1585.2 Q1214.54 1585.2 1217.69 1589.02 Q1220.84 1592.81 1220.84 1600.19 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1258.18 1587.43 L1258.18 1592.9 Q1255.69 1591.53 1253.18 1590.86 Q1250.7 1590.16 1248.15 1590.16 Q1242.45 1590.16 1239.3 1593.79 Q1236.15 1597.39 1236.15 1603.91 Q1236.15 1610.44 1239.3 1614.07 Q1242.45 1617.66 1248.15 1617.66 Q1250.7 1617.66 1253.18 1616.99 Q1255.69 1616.29 1258.18 1614.93 L1258.18 1620.34 Q1255.73 1621.48 1253.08 1622.06 Q1250.47 1622.63 1247.51 1622.63 Q1239.46 1622.63 1234.72 1617.57 Q1229.98 1612.51 1229.98 1603.91 Q1229.98 1595.19 1234.75 1590.2 Q1239.56 1585.2 1247.9 1585.2 Q1250.6 1585.2 1253.18 1585.77 Q1255.76 1586.31 1258.18 1587.43 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1298.85 1602.42 L1298.85 1605.28 L1271.93 1605.28 Q1272.31 1611.33 1275.55 1614.51 Q1278.83 1617.66 1284.66 1617.66 Q1288.03 1617.66 1291.18 1616.84 Q1294.37 1616.01 1297.48 1614.35 L1297.48 1619.89 Q1294.33 1621.23 1291.02 1621.93 Q1287.71 1622.63 1284.31 1622.63 Q1275.78 1622.63 1270.78 1617.66 Q1265.81 1612.7 1265.81 1604.23 Q1265.81 1595.48 1270.53 1590.35 Q1275.27 1585.2 1283.29 1585.2 Q1290.48 1585.2 1294.65 1589.85 Q1298.85 1594.46 1298.85 1602.42 M1293 1600.7 Q1292.93 1595.89 1290.29 1593.03 Q1287.68 1590.16 1283.35 1590.16 Q1278.45 1590.16 1275.49 1592.93 Q1272.56 1595.7 1272.12 1600.73 L1293 1600.7 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1343.25 1572.24 Q1338.99 1579.56 1336.92 1586.73 Q1334.85 1593.89 1334.85 1601.24 Q1334.85 1608.59 1336.92 1615.82 Q1339.02 1623.01 1343.25 1630.3 L1338.16 1630.3 Q1333.39 1622.82 1331 1615.59 Q1328.64 1608.37 1328.64 1601.24 Q1328.64 1594.14 1331 1586.95 Q1333.36 1579.76 1338.16 1572.24 L1343.25 1572.24 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1382.37 1592.9 Q1384.57 1588.95 1387.62 1587.08 Q1390.68 1585.2 1394.82 1585.2 Q1400.39 1585.2 1403.41 1589.11 Q1406.43 1593 1406.43 1600.19 L1406.43 1621.71 L1400.55 1621.71 L1400.55 1600.38 Q1400.55 1595.26 1398.73 1592.77 Q1396.92 1590.29 1393.19 1590.29 Q1388.64 1590.29 1386 1593.31 Q1383.36 1596.34 1383.36 1601.56 L1383.36 1621.71 L1377.47 1621.71 L1377.47 1600.38 Q1377.47 1595.22 1375.66 1592.77 Q1373.84 1590.29 1370.05 1590.29 Q1365.57 1590.29 1362.92 1593.35 Q1360.28 1596.37 1360.28 1601.56 L1360.28 1621.71 L1354.39 1621.71 L1354.39 1586.06 L1360.28 1586.06 L1360.28 1591.6 Q1362.29 1588.32 1365.09 1586.76 Q1367.89 1585.2 1371.74 1585.2 Q1375.62 1585.2 1378.33 1587.17 Q1381.07 1589.14 1382.37 1592.9 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M1417.19 1572.24 L1422.28 1572.24 Q1427.06 1579.76 1429.41 1586.95 Q1431.8 1594.14 1431.8 1601.24 Q1431.8 1608.37 1429.41 1615.59 Q1427.06 1622.82 1422.28 1630.3 L1417.19 1630.3 Q1421.42 1623.01 1423.49 1615.82 Q1425.59 1608.59 1425.59 1601.24 Q1425.59 1593.89 1423.49 1586.73 Q1421.42 1579.56 1417.19 1572.24 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><polyline clip-path="url(#clip662)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="102.74,1458.42 2352.76,1458.42 "/>
<polyline clip-path="url(#clip662)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="102.74,1157.47 2352.76,1157.47 "/>
<polyline clip-path="url(#clip662)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="102.74,856.521 2352.76,856.521 "/>
<polyline clip-path="url(#clip662)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="102.74,555.573 2352.76,555.573 "/>
<polyline clip-path="url(#clip662)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="102.74,254.625 2352.76,254.625 "/>
<polyline clip-path="url(#clip660)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="102.74,1458.42 102.74,47.2441 "/>
<polyline clip-path="url(#clip660)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="102.74,1458.42 121.638,1458.42 "/>
<polyline clip-path="url(#clip660)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="102.74,1157.47 121.638,1157.47 "/>
<polyline clip-path="url(#clip660)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="102.74,856.521 121.638,856.521 "/>
<polyline clip-path="url(#clip660)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="102.74,555.573 121.638,555.573 "/>
<polyline clip-path="url(#clip660)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="102.74,254.625 121.638,254.625 "/>
<path clip-path="url(#clip660)" d="M54.7958 1444.22 Q51.1847 1444.22 49.356 1447.78 Q47.5504 1451.32 47.5504 1458.45 Q47.5504 1465.56 49.356 1469.12 Q51.1847 1472.66 54.7958 1472.66 Q58.43 1472.66 60.2356 1469.12 Q62.0643 1465.56 62.0643 1458.45 Q62.0643 1451.32 60.2356 1447.78 Q58.43 1444.22 54.7958 1444.22 M54.7958 1440.51 Q60.6059 1440.51 63.6615 1445.12 Q66.7402 1449.7 66.7402 1458.45 Q66.7402 1467.18 63.6615 1471.78 Q60.6059 1476.37 54.7958 1476.37 Q48.9856 1476.37 45.9069 1471.78 Q42.8514 1467.18 42.8514 1458.45 Q42.8514 1449.7 45.9069 1445.12 Q48.9856 1440.51 54.7958 1440.51 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M14.6803 1140.19 L33.0366 1140.19 L33.0366 1144.12 L18.9626 1144.12 L18.9626 1152.6 Q19.9811 1152.25 20.9997 1152.09 Q22.0182 1151.9 23.0367 1151.9 Q28.8237 1151.9 32.2033 1155.07 Q35.5829 1158.24 35.5829 1163.66 Q35.5829 1169.24 32.1107 1172.34 Q28.6385 1175.42 22.3191 1175.42 Q20.1432 1175.42 17.8747 1175.05 Q15.6293 1174.68 13.2219 1173.94 L13.2219 1169.24 Q15.3052 1170.37 17.5275 1170.93 Q19.7497 1171.48 22.2265 1171.48 Q26.2311 1171.48 28.5691 1169.38 Q30.907 1167.27 30.907 1163.66 Q30.907 1160.05 28.5691 1157.94 Q26.2311 1155.84 22.2265 1155.84 Q20.3515 1155.84 18.4765 1156.25 Q16.6247 1156.67 14.6803 1157.55 L14.6803 1140.19 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M54.7958 1143.27 Q51.1847 1143.27 49.356 1146.83 Q47.5504 1150.37 47.5504 1157.5 Q47.5504 1164.61 49.356 1168.17 Q51.1847 1171.72 54.7958 1171.72 Q58.43 1171.72 60.2356 1168.17 Q62.0643 1164.61 62.0643 1157.5 Q62.0643 1150.37 60.2356 1146.83 Q58.43 1143.27 54.7958 1143.27 M54.7958 1139.56 Q60.6059 1139.56 63.6615 1144.17 Q66.7402 1148.75 66.7402 1157.5 Q66.7402 1166.23 63.6615 1170.84 Q60.6059 1175.42 54.7958 1175.42 Q48.9856 1175.42 45.9069 1170.84 Q42.8514 1166.23 42.8514 1157.5 Q42.8514 1148.75 45.9069 1144.17 Q48.9856 1139.56 54.7958 1139.56 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M-14.7177 869.866 L-7.07889 869.866 L-7.07889 843.5 L-15.389 845.167 L-15.389 840.908 L-7.12519 839.241 L-2.44929 839.241 L-2.44929 869.866 L5.18956 869.866 L5.18956 873.801 L-14.7177 873.801 L-14.7177 869.866 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M24.6339 842.32 Q21.0228 842.32 19.1941 845.884 Q17.3886 849.426 17.3886 856.556 Q17.3886 863.662 19.1941 867.227 Q21.0228 870.768 24.6339 870.768 Q28.2681 870.768 30.0737 867.227 Q31.9024 863.662 31.9024 856.556 Q31.9024 849.426 30.0737 845.884 Q28.2681 842.32 24.6339 842.32 M24.6339 838.616 Q30.4441 838.616 33.4996 843.222 Q36.5783 847.806 36.5783 856.556 Q36.5783 865.282 33.4996 869.889 Q30.4441 874.472 24.6339 874.472 Q18.8237 874.472 15.7451 869.889 Q12.6895 865.282 12.6895 856.556 Q12.6895 847.806 15.7451 843.222 Q18.8237 838.616 24.6339 838.616 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M54.7958 842.32 Q51.1847 842.32 49.356 845.884 Q47.5504 849.426 47.5504 856.556 Q47.5504 863.662 49.356 867.227 Q51.1847 870.768 54.7958 870.768 Q58.43 870.768 60.2356 867.227 Q62.0643 863.662 62.0643 856.556 Q62.0643 849.426 60.2356 845.884 Q58.43 842.32 54.7958 842.32 M54.7958 838.616 Q60.6059 838.616 63.6615 843.222 Q66.7402 847.806 66.7402 856.556 Q66.7402 865.282 63.6615 869.889 Q60.6059 874.472 54.7958 874.472 Q48.9856 874.472 45.9069 869.889 Q42.8514 865.282 42.8514 856.556 Q42.8514 847.806 45.9069 843.222 Q48.9856 838.616 54.7958 838.616 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M-14.7177 568.918 L-7.07889 568.918 L-7.07889 542.552 L-15.389 544.219 L-15.389 539.96 L-7.12519 538.293 L-2.44929 538.293 L-2.44929 568.918 L5.18956 568.918 L5.18956 572.853 L-14.7177 572.853 L-14.7177 568.918 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M14.6803 538.293 L33.0366 538.293 L33.0366 542.228 L18.9626 542.228 L18.9626 550.7 Q19.9811 550.353 20.9997 550.191 Q22.0182 550.006 23.0367 550.006 Q28.8237 550.006 32.2033 553.177 Q35.5829 556.348 35.5829 561.765 Q35.5829 567.344 32.1107 570.446 Q28.6385 573.524 22.3191 573.524 Q20.1432 573.524 17.8747 573.154 Q15.6293 572.784 13.2219 572.043 L13.2219 567.344 Q15.3052 568.478 17.5275 569.034 Q19.7497 569.589 22.2265 569.589 Q26.2311 569.589 28.5691 567.483 Q30.907 565.376 30.907 561.765 Q30.907 558.154 28.5691 556.048 Q26.2311 553.941 22.2265 553.941 Q20.3515 553.941 18.4765 554.358 Q16.6247 554.774 14.6803 555.654 L14.6803 538.293 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M54.7958 541.372 Q51.1847 541.372 49.356 544.936 Q47.5504 548.478 47.5504 555.608 Q47.5504 562.714 49.356 566.279 Q51.1847 569.821 54.7958 569.821 Q58.43 569.821 60.2356 566.279 Q62.0643 562.714 62.0643 555.608 Q62.0643 548.478 60.2356 544.936 Q58.43 541.372 54.7958 541.372 M54.7958 537.668 Q60.6059 537.668 63.6615 542.274 Q66.7402 546.858 66.7402 555.608 Q66.7402 564.335 63.6615 568.941 Q60.6059 573.524 54.7958 573.524 Q48.9856 573.524 45.9069 568.941 Q42.8514 564.335 42.8514 555.608 Q42.8514 546.858 45.9069 542.274 Q48.9856 537.668 54.7958 537.668 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M-11.5002 267.97 L4.81919 267.97 L4.81919 271.905 L-17.1251 271.905 L-17.1251 267.97 Q-14.4631 265.215 -9.8798 260.586 Q-5.27335 255.933 -4.0928 254.59 Q-1.84744 252.067 -0.967813 250.331 Q-0.0650401 248.572 -0.0650401 246.882 Q-0.0650401 244.127 -2.00947 242.391 Q-3.93076 240.655 -7.0326 240.655 Q-9.23166 240.655 -11.6853 241.419 Q-14.1159 242.183 -16.8937 243.734 L-16.8937 239.012 Q-14.0696 237.878 -11.6159 237.299 Q-9.16221 236.72 -7.12519 236.72 Q-1.75485 236.72 1.43958 239.405 Q4.63401 242.09 4.63401 246.581 Q4.63401 248.711 3.82383 250.632 Q3.0368 252.53 0.930325 255.123 Q0.351624 255.794 -2.75021 259.012 Q-5.85205 262.206 -11.5002 267.97 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M24.6339 240.424 Q21.0228 240.424 19.1941 243.989 Q17.3886 247.53 17.3886 254.66 Q17.3886 261.766 19.1941 265.331 Q21.0228 268.873 24.6339 268.873 Q28.2681 268.873 30.0737 265.331 Q31.9024 261.766 31.9024 254.66 Q31.9024 247.53 30.0737 243.989 Q28.2681 240.424 24.6339 240.424 M24.6339 236.72 Q30.4441 236.72 33.4996 241.327 Q36.5783 245.91 36.5783 254.66 Q36.5783 263.387 33.4996 267.993 Q30.4441 272.576 24.6339 272.576 Q18.8237 272.576 15.7451 267.993 Q12.6895 263.387 12.6895 254.66 Q12.6895 245.91 15.7451 241.327 Q18.8237 236.72 24.6339 236.72 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M54.7958 240.424 Q51.1847 240.424 49.356 243.989 Q47.5504 247.53 47.5504 254.66 Q47.5504 261.766 49.356 265.331 Q51.1847 268.873 54.7958 268.873 Q58.43 268.873 60.2356 265.331 Q62.0643 261.766 62.0643 254.66 Q62.0643 247.53 60.2356 243.989 Q58.43 240.424 54.7958 240.424 M54.7958 236.72 Q60.6059 236.72 63.6615 241.327 Q66.7402 245.91 66.7402 254.66 Q66.7402 263.387 63.6615 267.993 Q60.6059 272.576 54.7958 272.576 Q48.9856 272.576 45.9069 267.993 Q42.8514 263.387 42.8514 254.66 Q42.8514 245.91 45.9069 241.327 Q48.9856 236.72 54.7958 236.72 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M-108.567 922.906 L-84.9187 931.627 L-84.9187 914.153 L-108.567 922.906 M-114.901 926.535 L-114.901 919.246 L-67.3811 901.135 L-67.3811 907.819 L-79.5715 912.148 L-79.5715 933.569 L-67.3811 937.897 L-67.3811 944.677 L-114.901 926.535 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M-116.906 894.451 L-116.906 888.595 L-67.3811 888.595 L-67.3811 894.451 L-116.906 894.451 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M-113.151 870.548 L-103.029 870.548 L-103.029 858.485 L-98.4776 858.485 L-98.4776 870.548 L-79.1259 870.548 Q-74.7654 870.548 -73.524 869.371 Q-72.2827 868.161 -72.2827 864.501 L-72.2827 858.485 L-67.3811 858.485 L-67.3811 864.501 Q-67.3811 871.28 -69.8956 873.858 Q-72.4419 876.436 -79.1259 876.436 L-98.4776 876.436 L-98.4776 880.733 L-103.029 880.733 L-103.029 876.436 L-113.151 876.436 L-113.151 870.548 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M-103.029 850.783 L-103.029 844.926 L-67.3811 844.926 L-67.3811 850.783 L-103.029 850.783 M-116.906 850.783 L-116.906 844.926 L-109.49 844.926 L-109.49 850.783 L-116.906 850.783 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M-113.151 826.879 L-103.029 826.879 L-103.029 814.816 L-98.4776 814.816 L-98.4776 826.879 L-79.1259 826.879 Q-74.7654 826.879 -73.524 825.702 Q-72.2827 824.492 -72.2827 820.832 L-72.2827 814.816 L-67.3811 814.816 L-67.3811 820.832 Q-67.3811 827.612 -69.8956 830.19 Q-72.4419 832.768 -79.1259 832.768 L-98.4776 832.768 L-98.4776 837.065 L-103.029 837.065 L-103.029 832.768 L-113.151 832.768 L-113.151 826.879 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M-81.4493 807.719 L-103.029 807.719 L-103.029 801.862 L-81.6721 801.862 Q-76.6114 801.862 -74.0651 799.889 Q-71.5507 797.915 -71.5507 793.969 Q-71.5507 789.226 -74.5744 786.489 Q-77.5981 783.72 -82.818 783.72 L-103.029 783.72 L-103.029 777.864 L-67.3811 777.864 L-67.3811 783.72 L-72.8556 783.72 Q-69.6091 785.852 -68.0177 788.685 Q-66.4581 791.486 -66.4581 795.21 Q-66.4581 801.353 -70.2775 804.536 Q-74.097 807.719 -81.4493 807.719 M-103.888 792.982 L-103.888 792.982 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M-97.6182 742.343 L-116.906 742.343 L-116.906 736.486 L-67.3811 736.486 L-67.3811 742.343 L-72.7283 742.343 Q-69.5455 744.189 -67.9859 747.022 Q-66.4581 749.823 -66.4581 753.769 Q-66.4581 760.231 -71.6143 764.305 Q-76.7706 768.347 -85.1733 768.347 Q-93.576 768.347 -98.7322 764.305 Q-103.888 760.231 -103.888 753.769 Q-103.888 749.823 -102.329 747.022 Q-100.801 744.189 -97.6182 742.343 M-85.1733 762.299 Q-78.7121 762.299 -75.02 759.658 Q-71.3597 756.984 -71.3597 752.337 Q-71.3597 747.69 -75.02 745.016 Q-78.7121 742.343 -85.1733 742.343 Q-91.6345 742.343 -95.2948 745.016 Q-98.9869 747.69 -98.9869 752.337 Q-98.9869 756.984 -95.2948 759.658 Q-91.6345 762.299 -85.1733 762.299 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M-86.6692 693.932 L-83.8047 693.932 L-83.8047 720.859 Q-77.7572 720.477 -74.5744 717.23 Q-71.4234 713.952 -71.4234 708.127 Q-71.4234 704.753 -72.2509 701.602 Q-73.0784 698.419 -74.7335 695.3 L-69.1954 695.3 Q-67.8586 698.451 -67.1583 701.761 Q-66.4581 705.072 -66.4581 708.477 Q-66.4581 717.007 -71.4234 722.004 Q-76.3886 726.97 -84.855 726.97 Q-93.6078 726.97 -98.7322 722.259 Q-103.888 717.517 -103.888 709.496 Q-103.888 702.303 -99.2415 698.133 Q-94.6264 693.932 -86.6692 693.932 M-88.388 699.788 Q-93.1941 699.852 -96.0586 702.494 Q-98.9232 705.103 -98.9232 709.432 Q-98.9232 714.334 -96.1541 717.294 Q-93.385 720.222 -88.3561 720.668 L-88.388 699.788 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M-116.843 649.531 Q-109.522 653.796 -102.361 655.865 Q-95.1993 657.934 -87.8469 657.934 Q-80.4945 657.934 -73.2694 655.865 Q-66.0762 653.764 -58.7874 649.531 L-58.7874 654.623 Q-66.2671 659.398 -73.4922 661.785 Q-80.7173 664.14 -87.8469 664.14 Q-94.9446 664.14 -102.138 661.785 Q-109.331 659.43 -116.843 654.623 L-116.843 649.531 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M-96.186 610.414 Q-100.133 608.217 -102.011 605.162 Q-103.888 602.106 -103.888 597.969 Q-103.888 592.399 -99.9736 589.375 Q-96.0905 586.351 -88.8972 586.351 L-67.3811 586.351 L-67.3811 592.24 L-88.7063 592.24 Q-93.8306 592.24 -96.3133 594.054 Q-98.7959 595.868 -98.7959 599.592 Q-98.7959 604.143 -95.7722 606.785 Q-92.7485 609.427 -87.5286 609.427 L-67.3811 609.427 L-67.3811 615.315 L-88.7063 615.315 Q-93.8625 615.315 -96.3133 617.129 Q-98.7959 618.944 -98.7959 622.731 Q-98.7959 627.219 -95.7404 629.861 Q-92.7166 632.503 -87.5286 632.503 L-67.3811 632.503 L-67.3811 638.391 L-103.029 638.391 L-103.029 632.503 L-97.4909 632.503 Q-100.769 630.497 -102.329 627.696 Q-103.888 624.896 -103.888 621.044 Q-103.888 617.161 -101.915 614.456 Q-99.9417 611.719 -96.186 610.414 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip660)" d="M-116.843 575.593 L-116.843 570.501 Q-109.331 565.726 -102.138 563.371 Q-94.9446 560.984 -87.8469 560.984 Q-80.7173 560.984 -73.4922 563.371 Q-66.2671 565.726 -58.7874 570.501 L-58.7874 575.593 Q-66.0762 571.36 -73.2694 569.291 Q-80.4945 567.19 -87.8469 567.19 Q-95.1993 567.19 -102.361 569.291 Q-109.522 571.36 -116.843 575.593 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1" /><path clip-path="url(#clip662)" d="M166.42 1458.42 L1015.48 1458.42 L1227.75 1213 L1440.01 1360.25 L1493.08 1360.25 L1652.28 1176.18 L1811.48 1286.62 L2289.08 1286.62 L2289.08 1458.42 L1811.48 1458.42 L1652.28 1458.42 L1493.08 1458.42 L1440.01 1458.42 L1227.75 1458.42 L1015.48 1458.42 L166.42 1458.42  Z" fill="#d3d3d3" fill-rule="evenodd" fill-opacity="1"/>
<polyline clip-path="url(#clip662)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="166.42,1458.42 1015.48,1458.42 1227.75,1213 1440.01,1360.25 1493.08,1360.25 1652.28,1176.18 1811.48,1286.62 2289.08,1286.62 "/>
<polyline clip-path="url(#clip662)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="166.42,1458.42 1015.48,1458.42 1227.75,1213 1440.01,1360.25 1493.08,1360.25 1652.28,1176.18 1811.48,1286.62 2289.08,1286.62 "/>
</svg>
<p>The steep sections in the middle of the track are what makes this track a bit trickier to plan around. The problem data are </p><p class="math-container">\[U_+(v) = 0.125,\quad U_-(v) = -0.25,\\
r(v) = 1.5\cdot10^{-2} + \frac{0.127\cdot10^{-2}}{\sqrt2}v+\frac{0.016\cdot10^{-2}}{2}v^2,\\
v_i = v_f = 2,\\
T = 3600.\]</p><p>Putting it all together:</p><pre><code class="language- hljs">using OptimalTrainControl, Plots # hide
trackX = [0,16e3,20e3,24e3,25e3,28e3,31e3,40e3] # hide
trackY = [0,0,400,160,160,460,280,280]/9.81 # hide
track = HillyTrack(trackX, trackY) # hide
resistance = DavisResistance(1.5e-2, 0.127e-2/sqrt(2), 0.016e-2/2)
T = 3600.0
u_max(v) = 0.125
u_min(v) = -0.25
vᵢ = 2.0
vf = 2.0

prob = TrainProblem(;track, resistance, T, 
    umax = u_max, umin = u_min, vᵢ, vf)

points, sol = solve!(prob)

plot(sol.t, sol[2,:]; color = modecolor(sol.t, points), lw = 2, label = false,
    xlabel = &quot;Distance (m)&quot;, ylabel = &quot;Speed (m/s)&quot;)
plot!(twinx(), track; xlabel = &quot;&quot;)</code></pre><p>Apart from the <code>sol</code> structure (which is taken directly from the output of <code>DifferentialEquaionts.jl</code>) the <code>points</code> list contains the switching locations between individual control modes. The nomenclature is taken from <a href="https://doi.org/10.1016/j.trb.2015.07.023">this comprehensive summary</a> by A. Albrecht et al. The used control mode abbreviations are: <code>MaxP</code> for maximum acceleration, <code>MaxB</code> for maximum braking, <code>HoldP</code> for holding constant speed using positive control, <code>HoldR</code> for holding constant speed using negative control, <code>Coast</code> for coasting (no braking or accelerating).</p><pre><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; points</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: UndefVarError: `points` not defined</code></pre><h2 id="Recalculation"><a class="docs-heading-anchor" href="#Recalculation">Recalculation</a><a id="Recalculation-1"></a><a class="docs-heading-anchor-permalink" href="#Recalculation" title="Permalink"></a></h2><p>Suppose that circumstances have caused the train to deviate from the precomputed optimal speed profile. The optimisation can be also performed on a <code>subtrack</code> of the original one with different boundary conditions:</p><pre><code class="language- hljs">using OptimalTrainControl, Plots # hide
trackX = [0,16e3,20e3,24e3,25e3,28e3,31e3,40e3] # hide
trackY = [0,0,400,160,160,460,280,280]/9.81 # hide
track = HillyTrack(trackX, trackY) # hide
resistance = DavisResistance(1.5e-2, 0.127e-2/sqrt(2), 0.016e-2/2) # hide
T = 2600.0
u_max(v) = 0.125 # hide
u_min(v) = -0.25 # hide
vᵢ = 12.0
vf = 2.0
prob = TrainProblem(;track = subtrack(track, 11e3), resistance, T, umax = u_max, umin = u_min, vᵢ, vf)

points, sol = solve!(prob)

plot(sol.t, sol[2,:]; color = modecolor(sol.t, points), lw = 2, label = false,
    xlabel = &quot;Distance (m)&quot;, ylabel = &quot;Speed (m/s)&quot;)
plot!(twinx(), subtrack(track, 11e3); xlabel = &quot;&quot;)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../problem/">« Problem Statement</a><a class="docs-footer-nextpage" href="../reference/">Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Tuesday 2 January 2024 09:41">Tuesday 2 January 2024</span>. Using Julia version 1.10.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
